import{_ as i,c as s,o as a,a3 as l}from"./chunks/framework.7ep0oyv4.js";const n="/assets/yGduAmZEjMkJcFH.D58dV4WZ.png",t="/assets/n5IftvS3jGl9JPE.BM1XUNum.png",g=JSON.parse('{"title":"防火墙用户管理技术","description":"","frontmatter":{},"headers":[],"relativePath":"security devices/5.md","filePath":"security devices/5.md"}'),p={name:"security devices/5.md"},e=l('<h1 id="防火墙用户管理技术" tabindex="-1">防火墙用户管理技术 <a class="header-anchor" href="#防火墙用户管理技术" aria-label="Permalink to &quot;防火墙用户管理技术&quot;">​</a></h1><h2 id="aaa原理" tabindex="-1">AAA原理 <a class="header-anchor" href="#aaa原理" aria-label="Permalink to &quot;AAA原理&quot;">​</a></h2><h3 id="aaa简介" tabindex="-1">AAA简介 <a class="header-anchor" href="#aaa简介" aria-label="Permalink to &quot;AAA简介&quot;">​</a></h3><p>AAA是Authentication（认证）、Authorization（授权）和Accounting（计费）的简称，是网络安全的一种管理机制，提供了认证、授权、计费三种安全功能。</p><ul><li>认证：验证用户是否可以获得访问权，确定哪些用户可以访问网络；</li><li>授权：授权用户可以使用哪些服务；</li><li>计费：记录用户使用网络资源的情况</li></ul><p>AAA的基本架构中包括用户、NAS、AAA服务器。</p><ul><li>NAS负责集中收集和管理用户的访问请求，现网常见的NAS设备有交换机、防火墙等；</li><li>AAA服务器负责集中管理用户信息</li></ul><p><strong>NAS基于域来对用户进行管理</strong>，每个域都可以配置不同的认证、授权和计费方案，用 于对该域下的用户进行认证、授权和计费。</p><ul><li><p>每个用户都属于某一个域。用户属于哪个域是由用户名中的域名分隔符@后的 字符串决定。例如，如果用户名是User1@Domain1，则用户属于Domain1域。 如果用户名后不带有@，则用户属于系统缺省域；</p></li><li><p>在NAS上会创建多个域来管理用户，不同的域可以关联不同的AAA方案；当收 到用户接入网络的请求时，NAS会根据用户名来判断用户所在的域，根据该域 对应的AAA方案对用户进行管控。</p></li></ul><p>用户域即用户所在的区域，域名为该区域的名字，一般情况下用户名@域名则表明用户属于这个区域。</p><blockquote><p>目前华为设备支持基于RADIUS、HWTACACS、LDAP或AD来实现AAA，在实际应用中，RADIUS最为常用。</p></blockquote><h3 id="认证" tabindex="-1">认证 <a class="header-anchor" href="#认证" aria-label="Permalink to &quot;认证&quot;">​</a></h3><p>防火墙支持的三种认证方式：</p><ul><li>不认证：完全信任用户，不对用户身份进行合法性检查。鉴于安全考虑，这种认证方式很少被采用。</li><li>本地认证：将本地用户信息（包括用户名、密码和各种属性）配置在NAS上，此时NAS就是AAA Server。本地认证的优点是处理速度快、运营成本低；缺点是存储信息量受设备硬件条件限制。这种认证方式常用于对用户登录设备进行管理，如Telnet，FTP等。</li><li>远端认证：将用户信息（包括用户名、密码和各种属性）配置在认证服务器上。支持通过RADIUS协议进行远端认证。NAS作为客户端，与RADIUS服务器服务器进行通信。</li></ul><h3 id="授权" tabindex="-1">授权 <a class="header-anchor" href="#授权" aria-label="Permalink to &quot;授权&quot;">​</a></h3><p>授权表示用户可以使用哪些业务，如公共业务以及敏感业务等。</p><p>防火墙支持的授权方式有：不授权、本地授权、远端授权。授权内容包括：用户组、VLAN、ACL编号等。</p><h3 id="计费" tabindex="-1">计费 <a class="header-anchor" href="#计费" aria-label="Permalink to &quot;计费&quot;">​</a></h3><p>防火墙支持的AAA计费方式有：不计费，远端计费。</p><p>计费功能用于监控授权用户的网络行为和网络资源的使用情况。</p><p>计费主要的含义有三个：</p><ul><li>用户用多长时间；</li><li>用户花了多少钱；</li><li>用户做了哪些操作；</li></ul><h3 id="radius" tabindex="-1">RADIUS <a class="header-anchor" href="#radius" aria-label="Permalink to &quot;RADIUS&quot;">​</a></h3><p>AAA可以通过多种协议来实现，在实际应用中，最常使用RADIUS协议。</p><p>RADIUS是一种分布式的、客户端/服务器结构的信息交互协议，能保护网络不受未授权访问的干扰，常应用在既要求有较高安全性、又允许远程用户访问的各种网络环境中。</p><p>该协议定义了基于UDP（User Datagram Protocol）的RADIUS报文格式及其传输机制，并<strong>规定UDP端口1812、1813分别作为默认的认证、计费端口</strong>。RADIUS有时也会使用1645、1646分别作为默认的认证、计费端口</p><p>RADIUS协议的主要特征如下：</p><ul><li>客户端/服务器模式</li><li>安全的消息交互机制</li><li>良好的扩展性</li></ul><p><img src="'+n+'" alt="image-20231031172038957" loading="lazy"></p><h3 id="ldap" tabindex="-1">LDAP <a class="header-anchor" href="#ldap" aria-label="Permalink to &quot;LDAP&quot;">​</a></h3><p>LDAP是轻量级目录访问协议的简称，LDAP基于C/S架构。</p><p>LDAP服务器负责对来自应用服务器的请求进行认证，同时还指定用户访问的资源范围等。</p><p>LDAP定义了多种操作来实现LDAP的各种功能，其中可以利用LDAP的绑定和查询操作来实现用户的认证和授权功能。</p><blockquote><p>应用场景：网络接入设备和LDAP服务器对接，利用LDAP的绑定和查询操作来实现用 户的认证和授权功能</p></blockquote><p>目录是一组具有类似属性、以一定逻辑和层次组合的信息。LDAP协议中目录是按照树型结构组织，目录由条目（Entry）组成，条目是具有区别名DN的属性集合。属性由类型和多个值组成。</p><p><img src="'+t+`" alt="image-20231031172326691" loading="lazy"></p><h2 id="用户认证及应用" tabindex="-1">用户认证及应用 <a class="header-anchor" href="#用户认证及应用" aria-label="Permalink to &quot;用户认证及应用&quot;">​</a></h2><h3 id="用户组织架构及分类" tabindex="-1">用户组织架构及分类 <a class="header-anchor" href="#用户组织架构及分类" aria-label="Permalink to &quot;用户组织架构及分类&quot;">​</a></h3><p>用户是网络访问的主体，是防火墙进行网络行为控制和网络权限分配的基本单元。用户组织架构中涉及三个概念：</p><ul><li>认证域：用户组织结构的容器，防火墙缺省存在default认证域，用户可以根据需求新建认证域，<strong>决定对用户的认证方式</strong>；</li><li>用户组/用户：用户按树形结构组织，用户隶属于组（部门）。管理员可以根据企业的组织结构来创建部门和用户；</li><li>安全组：横向组织结构的跨部门群组。当需要基于部门以外的维度对用户进行管理可以创建跨部门的安全组。例如企业中跨部门成立的群组。</li></ul><p>系统默认有一个缺省认证域，每个用户组可以包括多个用户和用户组。每个用户组只能属于一个父用户组，每个用户至少属于一个用户组，也可以属于多个用户组。</p><p>用户 指的是访问网络资源的主体，表示“谁”在进行访问，是网络访问行为的重要标识，用户的三种形式：</p><ul><li>上网用户</li><li>接入用户【SSLVPN、L2TP/L2 TP Over IPSec、IPSec等】</li><li>管理用户【Telnet、SSH、SNMP等】</li></ul><p>防火墙通过 <strong>认证</strong> 来验证访问者的身份，防火墙对访问者进行认证的方式包括：</p><ul><li><p>本地认证</p></li><li><p>服务器认证【Radius、LDAP、MSAD、Agile Controller等】</p></li><li><p>单点登陆</p></li></ul><p>用户按树形结构组织，部门对应<strong>用户组</strong>，员工对应<strong>用户</strong>，跨部门群组对应<strong>安全组</strong></p><h3 id="认证域" tabindex="-1">认证域 <a class="header-anchor" href="#认证域" aria-label="Permalink to &quot;认证域&quot;">​</a></h3><p>认证域是认证流程中的重要环节，认证域上的 **配置决定了对用户的认证方式 **以及 <strong>用户的组织结构</strong>。</p><ul><li>作为用户组织结构的容器</li><li>决定对用户的认证方式</li></ul><p>用户名中@后面的字符为认证域，如用户名中无@则用户缺省属于default域。如用户yage@huawei 属于huawei认证域，用户zhuyage属于default域。</p><p>认证域中可以配置的选项：</p><ul><li>认证方式：本地认证 或 服务器认证</li><li>认证服务器：服务器地址</li><li>地址池：L2TP用户 和 PPPoE用户需要</li><li>新用户选项：单点登录时需要</li></ul><h3 id="认证策略" tabindex="-1">认证策略 <a class="header-anchor" href="#认证策略" aria-label="Permalink to &quot;认证策略&quot;">​</a></h3><p>认证策略的作用是 <strong>选出需要进行免认证或会话认证的数据流</strong></p><ul><li><p>对免认证的数据流，防火墙根据用户与IP/MAC地址的绑定关系来识别用户</p></li><li><p>对会话认证的数据流，防火墙会推送认证页面</p></li><li><p><strong>认证策略对单点登录或事前认证方式不起作用</strong></p></li></ul><p>认证策略的条件：</p><ul><li><p>源安全区域、目的安全区域</p></li><li><p>源地址/地区、目的地址/地区</p></li></ul><p><strong>认证策略的动作：Portal认证(网页认证)、短信认证、免认证、不认证</strong></p><p>注意：以下流量即使匹配了认证策略也不会触发认证：</p><ul><li>访问设备或设备发起的流量</li><li>DHCP、BGP、OSPF、LDP报文</li><li>触发认证的第一条HTTP业务数据流对应的DNS报文不受认证策略控制，用户认证通过上线后的DNS报文受认证策略控制</li></ul><p>匹配顺序：多条认证策略规则时，由上至下匹配，匹配上就不再匹配后续规则。如果所有规则都没匹配到，按照缺省认证策略进行处理。</p><h3 id="认证配置" tabindex="-1">认证配置 <a class="header-anchor" href="#认证配置" aria-label="Permalink to &quot;认证配置&quot;">​</a></h3><p>创建用户：</p><p>​ WBE页面：对象 -- 用户 -- default -- 新建用户组 和 用户</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">user-manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> group</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /default/yunwei</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #创建用户组</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">user-manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yage</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                #创建用户</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Huawei@123</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                 #设置密码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> parent-group</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /default/yunwei</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        #绑定用户组</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user-manage</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> online-user</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      #查看在线用户</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#认证策略，哪些流量需要认证，可以web上创建</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">auth-policy</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Internet</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  source-zone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trust</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  destination-zone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> untrust</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  action</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> auth</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#放行认证流量</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">security-policy</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Auth</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  source-zone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trust</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  destination-zone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> local</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  source-address</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10.1.1.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 24</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  destination-address</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10.1.1.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 32</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tcp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> destination-port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8887</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  action</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> permit</span></span></code></pre></div><blockquote><p>安全策略可以基于用户去做</p></blockquote>`,66),h=[e];function r(k,o,d,u,F,c){return a(),s("div",null,h)}const y=i(p,[["render",r]]);export{g as __pageData,y as default};
