# 四、破解windows系统密码

## 4.1 利用5次shift漏洞破解win7密码

**1）漏洞**

1、在末登录系统时，连续按5次shift键，弹出程序c:\windows\system32\sethc.exe  
2、部分win7及w1n18系统在未进入系统时，可以通过系统修复漏洞篡改系统文件名！  
注：如win7或win10系统已修补漏洞2，则无法利用

**2）破解过程相关知识**

1、Cnd工具路径  
    c:\windows\system32\cmd  
2、用户/账户密码存储位置  
    c:\windows\system32\config\SAM  
    #非逆转型加密、使用hash值类似的方法、MD5 SHA  
3、修改账户密码  
    net user 用户名 新密码

**3）漏洞利用过程**

案例：破解win7系统密码  
实验步骤：  
1、开启win7虚拟机，开机，并设置一个复杂密码：  
2、关机，并开机，在出现windows/启动界面时强制关机；  
3、再开机，出现“启动修复（推荐）”及选择该项：  #如为出现，多尝试几次第2步，如还不行，请换其他方法  
4、出现系统还原提示，点击取消，等待几分钟后，会出现问题原因，点击查看详细信息；  
5、打开最后一个链接即一个记事本；  
6、记事本中点打开，并选择显示所有文件;  
7、找到sethc并改名sethc-bak,再找到cmd,复制一份cmd改名为sethc  
8、全部关闭，重启。  
9、系统启动完毕后，连续按5次shift键，将弹出cmd工具，使用命令net user用户名 新密码，将当前用户密码修改掉即可，或者另外建立1个用户，并提升为管理员，注销后，可再删除新建的用户，这样的好处为不修改当前用户的密码即可登录系统。

## 4.2 利用PE系统破解XP密码

**1）漏洞**

PE系统，独立于硬盘系统的微型系统，过PE系统启动可以对系统的SAM文件做修改  
无论计算机系统本身有无漏洞，都可以通过PE系统打开计算机，从而修改密码。

**2）破解过程相关知识**

账户密码存储文件：c:\windows\system32\config\SAM  
U盘引导系统：开机修改启动顺序，并将U盘设置为第一启动顺序！

**3）漏洞利用过程**

1、U盘启动进入PE  
2、打开c:\windows\system32\config\SAM，SAM文件采用hash算法，用新密码hash将其覆盖  
3、重启进入系统，用新密码登录  
​  
思路：计算机正常启动时，SAM文件禁止被访问，进入PE后，U盘可以当作计算机的硬盘，原硬盘可以看作移动硬盘，可以对移动硬盘进行修改控制，因此原SAM文件可以被访问修改，将自己创建的密码得出的hash值替换原SAM文件。

