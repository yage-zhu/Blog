<!DOCTYPE html>
<html lang="zh" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>防火墙高可靠性技术 | yage</title>
    <meta name="description" content="yage Blog">
    <meta name="generator" content="VitePress v1.1.4">
    <link rel="preload stylesheet" href="/assets/style.DpHQPELj.css" as="style">
    
    <script type="module" src="/assets/app.BJ0HA5hI.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.D0GxZxa-.js">
    <link rel="modulepreload" href="/assets/chunks/framework.7ep0oyv4.js">
    <link rel="modulepreload" href="/assets/security devices_4.md.BAXO_DuJ.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"dark",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-2fdd469f><!--[--><!--]--><!--[--><span tabindex="-1" data-v-9bbe40e8></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-9bbe40e8> Skip to content </a><!--]--><!----><header class="VPNav" data-v-2fdd469f data-v-2981abac><div class="VPNavBar has-sidebar top" data-v-2981abac data-v-e8abc852><div class="wrapper" data-v-e8abc852><div class="container" data-v-e8abc852><div class="title" data-v-e8abc852><div class="VPNavBarTitle has-sidebar" data-v-e8abc852 data-v-0a1dc046><a class="title" href="/" data-v-0a1dc046><!--[--><!--]--><!--[--><img class="VPImage logo" src="/stars.png" alt data-v-d4169a1c><!--]--><span data-v-0a1dc046>yage</span><!--[--><!--]--></a></div></div><div class="content" data-v-e8abc852><div class="content-body" data-v-e8abc852><!--[--><!--]--><div class="VPNavBarSearch search" data-v-e8abc852><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-e8abc852 data-v-e5bdfb67><span id="main-nav-aria-label" class="visually-hidden" data-v-e5bdfb67>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-e5bdfb67 data-v-4f62c62c><!--[--><span data-v-4f62c62c>Home</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e5bdfb67 data-v-52b91f0c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-52b91f0c><span class="text" data-v-52b91f0c><!----><span data-v-52b91f0c>前端</span><span class="vpi-chevron-down text-icon" data-v-52b91f0c></span></span></button><div class="menu" data-v-52b91f0c><div class="VPMenu" data-v-52b91f0c data-v-e98d092d><div class="items" data-v-e98d092d><!--[--><!--[--><div class="VPMenuLink" data-v-e98d092d data-v-2ce5f666><a class="VPLink link" href="/html/1.html" data-v-2ce5f666><!--[-->HTML<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e98d092d data-v-2ce5f666><a class="VPLink link" href="/css/1.html" data-v-2ce5f666><!--[-->CSS<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e98d092d data-v-2ce5f666><a class="VPLink link" href="/javascript/1.html" data-v-2ce5f666><!--[-->JavaScript<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e98d092d data-v-2ce5f666><a class="VPLink link" href="/ajax/1.html" data-v-2ce5f666><!--[-->ajax<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e98d092d data-v-2ce5f666><a class="VPLink link" href="/less%20and%20scss/1.html" data-v-2ce5f666><!--[-->less and scss<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e98d092d data-v-2ce5f666><a class="VPLink link" href="/typescript/1.html" data-v-2ce5f666><!--[-->TypeScript<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e98d092d data-v-2ce5f666><a class="VPLink link" href="/vue3/1.html" data-v-2ce5f666><!--[-->Vue3<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e98d092d data-v-2ce5f666><a class="VPLink link" href="/browser/1.html" data-v-2ce5f666><!--[-->浏览器工作原理<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-e5bdfb67 data-v-52b91f0c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-52b91f0c><span class="text" data-v-52b91f0c><!----><span data-v-52b91f0c>安全</span><span class="vpi-chevron-down text-icon" data-v-52b91f0c></span></span></button><div class="menu" data-v-52b91f0c><div class="VPMenu" data-v-52b91f0c data-v-e98d092d><div class="items" data-v-e98d092d><!--[--><!--[--><div class="VPMenuLink" data-v-e98d092d data-v-2ce5f666><a class="VPLink link" href="/kali/1.html" data-v-2ce5f666><!--[-->Kali<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e98d092d data-v-2ce5f666><a class="VPLink link" href="/network%20security/1.html" data-v-2ce5f666><!--[-->网络安全<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e98d092d data-v-2ce5f666><a class="VPLink link" href="/security%20devices/1.html" data-v-2ce5f666><!--[-->安全设备<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/python/1.html" tabindex="0" data-v-e5bdfb67 data-v-4f62c62c><!--[--><span data-v-4f62c62c>Python</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/nodejs/1.html" tabindex="0" data-v-e5bdfb67 data-v-4f62c62c><!--[--><span data-v-4f62c62c>Nodejs</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/git/1.html" tabindex="0" data-v-e5bdfb67 data-v-4f62c62c><!--[--><span data-v-4f62c62c>Git</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/linux/1.html" tabindex="0" data-v-e5bdfb67 data-v-4f62c62c><!--[--><span data-v-4f62c62c>Linux</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-e8abc852 data-v-8c529fcf data-v-52b91f0c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-52b91f0c><span class="text" data-v-52b91f0c><span class="vpi-languages option-icon" data-v-52b91f0c></span><!----><span class="vpi-chevron-down text-icon" data-v-52b91f0c></span></span></button><div class="menu" data-v-52b91f0c><div class="VPMenu" data-v-52b91f0c data-v-e98d092d><!----><!--[--><!--[--><div class="items" data-v-8c529fcf><p class="title" data-v-8c529fcf>中文</p><!--[--><div class="VPMenuLink" data-v-8c529fcf data-v-2ce5f666><a class="VPLink link" href="/en/security devices/4.html" data-v-2ce5f666><!--[-->English<!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-e8abc852 data-v-dba25ce5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to light theme" aria-checked="true" data-v-dba25ce5 data-v-1a5707b1 data-v-bcb971ab><span class="check" data-v-bcb971ab><span class="icon" data-v-bcb971ab><!--[--><span class="vpi-sun sun" data-v-1a5707b1></span><span class="vpi-moon moon" data-v-1a5707b1></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-e8abc852 data-v-1fe946d0 data-v-49c0bd2e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yage-zhu" aria-label="github" target="_blank" rel="noopener" data-v-49c0bd2e data-v-78639b0a><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-e8abc852 data-v-79512190 data-v-52b91f0c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-52b91f0c><span class="vpi-more-horizontal icon" data-v-52b91f0c></span></button><div class="menu" data-v-52b91f0c><div class="VPMenu" data-v-52b91f0c data-v-e98d092d><!----><!--[--><!--[--><div class="group translations" data-v-79512190><p class="trans-title" data-v-79512190>中文</p><!--[--><div class="VPMenuLink" data-v-79512190 data-v-2ce5f666><a class="VPLink link" href="/en/security devices/4.html" data-v-2ce5f666><!--[-->English<!--]--></a></div><!--]--></div><div class="group" data-v-79512190><div class="item appearance" data-v-79512190><p class="label" data-v-79512190>Appearance</p><div class="appearance-action" data-v-79512190><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to light theme" aria-checked="true" data-v-79512190 data-v-1a5707b1 data-v-bcb971ab><span class="check" data-v-bcb971ab><span class="icon" data-v-bcb971ab><!--[--><span class="vpi-sun sun" data-v-1a5707b1></span><span class="vpi-moon moon" data-v-1a5707b1></span><!--]--></span></span></button></div></div></div><div class="group" data-v-79512190><div class="item social-links" data-v-79512190><div class="VPSocialLinks social-links-list" data-v-79512190 data-v-49c0bd2e><!--[--><a class="VPSocialLink no-icon" href="https://github.com/yage-zhu" aria-label="github" target="_blank" rel="noopener" data-v-49c0bd2e data-v-78639b0a><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-e8abc852 data-v-6d92cf19><span class="container" data-v-6d92cf19><span class="top" data-v-6d92cf19></span><span class="middle" data-v-6d92cf19></span><span class="bottom" data-v-6d92cf19></span></span></button></div></div></div></div><div class="divider" data-v-e8abc852><div class="divider-line" data-v-e8abc852></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-2fdd469f data-v-18c7a066><div class="container" data-v-18c7a066><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-18c7a066><span class="vpi-align-left menu-icon" data-v-18c7a066></span><span class="menu-text" data-v-18c7a066>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-18c7a066 data-v-636ac860><button data-v-636ac860>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-2fdd469f data-v-4e63ba98><div class="curtain" data-v-4e63ba98></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-4e63ba98><span class="visually-hidden" id="sidebar-aria-label" data-v-4e63ba98> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-4e63ba98><section class="VPSidebarItem level-0 has-active" data-v-4e63ba98 data-v-a0363abd><div class="item" role="button" tabindex="0" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><h2 class="text" data-v-a0363abd>目录</h2><!----></div><div class="items" data-v-a0363abd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/security%20devices/1.html" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>网络安全基础</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/security%20devices/2.html" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>防火墙基础原理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/security%20devices/3.html" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>防火墙NAT</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/security%20devices/4.html" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>防火墙高可靠性技术</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/security%20devices/5.html" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>防火墙用户管理技术</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/security%20devices/6.html" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>加解密及PKI</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/security%20devices/7.html" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>VPN</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/security%20devices/8.html" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>防火墙流量管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-a0363abd data-v-a0363abd><div class="item" data-v-a0363abd><div class="indicator" data-v-a0363abd></div><a class="VPLink link link" href="/security%20devices/9.html" data-v-a0363abd><!--[--><p class="text" data-v-a0363abd>防火墙虚拟系统</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-2fdd469f data-v-0c35d42f><div class="VPDoc has-sidebar has-aside" data-v-0c35d42f data-v-2295edbf><!--[--><!--]--><div class="container" data-v-2295edbf><div class="aside" data-v-2295edbf><div class="aside-curtain" data-v-2295edbf></div><div class="aside-container" data-v-2295edbf><div class="aside-content" data-v-2295edbf><div class="VPDocAside" data-v-2295edbf data-v-22c997c5><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" role="navigation" data-v-22c997c5 data-v-07e68753><div class="content" data-v-07e68753><div class="outline-marker" data-v-07e68753></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-07e68753>On this page</div><ul class="VPDocOutlineItem root" data-v-07e68753 data-v-2d8a325d><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-22c997c5></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-2295edbf><div class="content-container" data-v-2295edbf><!--[--><!--]--><main class="main" data-v-2295edbf><div style="position:relative;" class="vp-doc _security%20devices_4" data-v-2295edbf><div><h1 id="防火墙高可靠性技术" tabindex="-1">防火墙高可靠性技术 <a class="header-anchor" href="#防火墙高可靠性技术" aria-label="Permalink to &quot;防火墙高可靠性技术&quot;">​</a></h1><p>防火墙高可靠性技术分为两类：设备高可靠性和链路高可靠性</p><ul><li>设备高可靠性技术 <ul><li>双机热备：两台防火墙组成双机热备，当一台防火墙发生故障时，另一台防火墙接替工作，保障业务的连续性</li><li>跨数据中心集群 ：当某一个数据中心防火墙发生故障或灾难的情况下，其他数据中心防火墙可以对其业务实现接管，达到互为备份的效果</li><li>硬件Bypass：当防火墙工作失效时，会导致网络中断，而硬件Bypass则能让防火墙在工作失效后，对流量不作任何处理，直接转发</li></ul></li><li>链路高可靠性技术 <ul><li>Eth-Trunk ：绑定多个物理接口为一个逻辑接口，提高链路的可靠性</li><li>IP-Link：周期性发送ARP或ICMP报文，检测链路的可用性</li><li>BFD：周期性发送BFD控制报文，检测设备或系统之间链路的可用性</li><li>Link-Group：Link-Group功能是将多个接口的状态相互绑定，组成一个逻辑组</li><li>健康检查：防火墙上的功能，对服务可用性、链路可用性或链路时延等进行探测，目前与防火墙智能选路特性结合使用</li></ul></li></ul><h2 id="双机热备" tabindex="-1">双机热备 <a class="header-anchor" href="#双机热备" aria-label="Permalink to &quot;双机热备&quot;">​</a></h2><p>VRRP（Virtual Router Redundancy Protocol）是一种容错协议，它保证当主机的下一跳路由器（默认网关）出现故障时，由备份路由器自动代替出现故障的路由器完成报文转发任务，从而保持网络通信的连续性和可靠性。同一VRRP备份组内的路由器有两种角色：Master设备（活动状态）、Backup设备（备份状态）。</p><p>VGMP（VRRP Group Management Protocol）是VRRP组管理协议，主要用于 实现对VRRP备份组的统一管理，<strong>保证多个VRRP备份组状态的一致性</strong>，同时VGMP的状态也会影响路由协议的开销。</p><p>HRP（Huawei Redundancy Protocol）协议，主要用于实现防火墙双机之间关键配置命令和状态化信息的备份，状态化信息主要包括会话表、Servermap表、黑白名单、NAT映射表等。</p><p>备份通道：也称为“心跳线”，用于HRP协议和VGMP协议的通信。</p><ul><li>备份方向 <ul><li>支持备份的配置命令默认只能在配置主设备上执行，这些命令会自动备份到备设备上。例如，安全策略配置命令、NAT策略配置命令等；</li><li>主备备份组网中，只有主设备会处理业务，主设备上生成业务表项，并向备设备备份。负载分担组网中，两台防火墙都会处理业务，都会生成业务表项并向对端设备备份。</li></ul></li><li>备份通道</li><li>配置和状态数据需要网络管理员指定备份通道接口进行备份。一般情况下，在两台设备上直连的端口作为备份通道，有时也称为**“心跳线”**（VGMP也通过该通道进行通信）。</li></ul><p>防火墙双机热备和路由器VRRP区别：</p><ul><li>路由器的主备需要通过优先级控制，防火墙的主备是 <strong>人为直接指定</strong>。</li><li>路由器双机热备环境，可以异步路由（流量来回路径不一致），但是防火墙双机热备环境，如果流量异步必须得把会话表同步过来，<strong>防火墙心跳线可以同步配置(路由、接口地址等除外)，可以同步会话表等表项信息、HRP心跳报文等</strong>，不转发业务流量</li><li>路由器双机热备就是VRRP，防火墙双机热备用到VGMP（VRRP组管理协议）</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet1/0/0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vrrp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vrid</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> virtual-ip</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10.1.1.254</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> active</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   #主设备</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet1/0/0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vrrp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vrid</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> virtual-ip</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10.1.1.253</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> standby</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #备设备</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hrp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> g1/0/2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10.1.1.2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hrp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dis</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hrp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> state</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> verbose</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      #查看hrp状态详细信息</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	mirror</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seesion：off</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #意味着会话快速同步功能关闭</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#开启会话快速同步，适用于负载分担的工作方式，以应对报文来回路径不一致的场景</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hrp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mirror</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> session</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span></span></code></pre></div><p>双机热备工作模式：</p><ul><li>主备模式：两台设备一主一备，所有流量由主设备处理</li><li>负载分担：两台设备互为主备，共同承担整网流量</li></ul><h2 id="链路高可靠性技术" tabindex="-1">链路高可靠性技术 <a class="header-anchor" href="#链路高可靠性技术" aria-label="Permalink to &quot;链路高可靠性技术&quot;">​</a></h2><h3 id="eth-trunk" tabindex="-1">Eth-Trunk <a class="header-anchor" href="#eth-trunk" aria-label="Permalink to &quot;Eth-Trunk&quot;">​</a></h3><ul><li>Eth-Trunk技术简称 <strong>链路聚合</strong>，可以将多条以太网物理链路捆绑在一起成为一条逻辑链路，可实现增加带宽、提高链路可靠性的作用。</li><li>Eth-Trunk主要功能如下： <ul><li>增加带宽：链路聚合接口的最大带宽可以达到各成员接口带宽之和。</li><li>流量负载分担：在一个链路聚合组内，可以实现业务流量的负载分担。</li><li>提高可靠性：当某条链路出现故障时，流量可以切换到其他可用链路上，从而提高链路聚合接口的可靠性。</li></ul></li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> eth-trunk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     #创建聚合口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0/0/1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> eth-trunk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              #加入聚合口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0/0/2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> eth-trunk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> eth-trunk</span></span></code></pre></div><h3 id="ip-link" tabindex="-1">IP-Link <a class="header-anchor" href="#ip-link" aria-label="Permalink to &quot;IP-Link&quot;">​</a></h3><p>传统双机热备存在的不足：传统的双机热备通常只监控防火墙的直连接口，当主用防火墙的直连接口状态由UP转为DOWN时，防火墙触发主备切换。但是对于非直连链路的故障，防火墙无法感知，不会进行主备切换，导致业务中断</p><ul><li><p>IP-Link探测技术是指防火墙通过向指定的目的IP周期性地发送探测报文并等待应答，来判断链路是否发生故障。IP-Link可以检测到非直连链路的故障，与双机热备技术结合使用，提高网络可靠性</p></li><li><p>IP-Link技术根据探测报文的不同，可以分为以下两种探测模式</p><ul><li>ARP探测模式：ARP探测模式仅能用于探测二层网络的连通性</li><li>ICMP探测模式：ICMP探测模式适用于探测二层/三层网络的连通性</li></ul></li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ip-link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> check</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ip-link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> destination</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100.1.1.1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0/0/3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hrp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> track</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ip-link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   #hrp关联ip-link</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ip-link</span></span></code></pre></div><h3 id="bfd" tabindex="-1">BFD <a class="header-anchor" href="#bfd" aria-label="Permalink to &quot;BFD&quot;">​</a></h3><p>IP-Link探测技术的不足：IP-Link探测基于ARP或ICMP协议实现，若探测路径上存在某些安全设备，对ARP/ICMP报文进行了过滤，则会导致IP-Link探测失效</p><ul><li>BFD（Bidirectional Forwarding Detection，双向转发检测）用于快速检测设备之间的通信故障，并在出现故障时通知上层协议。</li><li>BFD技术基于UDP报文进行探测，目的端口号为3784。</li><li>需要在防火墙和被探测设备（如路由器）之间建立BFD会话，<strong>需要会话两端设备支持BFD协议</strong>。</li></ul><p><strong>基于单跳会话的BFD Echo功能</strong></p><ul><li>如果对端设备不支持BFD功能，则无法正常建立会话。此时可以使用基于单跳会话的BFD Echo功能来检测链路。</li><li>BFD Echo功能也称为BFD回声功能，是由本地发送BFD Echo报文，远端系统将报文环回的一种检测机制。</li><li>为了能够快速的检测这两台设备之间的故障，可以在支持BFD功能的设备上创建单臂回声功能的BFD会话。支持BFD功能的设备主动发起回声请求功能，不支持BFD功能的设备接收到该报文后直接将其环回，从而实现转发链路的连通性检测功能</li></ul><p><strong>BFD会话建立过程</strong></p><ul><li>BFD通过控制报文中的本地标识符和远端标识符区分不同的会话。</li><li>BFD会话有四种状态：Down、Init、Up和AdminDown</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bfd</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bfd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cfg-name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bind</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> peer-ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> peer-ip</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">vpn-instance</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vpn-instance-name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> interface-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> interface-number</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">nexthop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nexthop-address</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> dhcp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> }</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ]</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">source-ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> source-ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">discriminator</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> local</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> local-discr-value</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">discriminator</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote-discr-value</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">commit</span></span></code></pre></div><h3 id="link-group" tabindex="-1">Link-Group <a class="header-anchor" href="#link-group" aria-label="Permalink to &quot;Link-Group&quot;">​</a></h3><ul><li>Link-Group功能可以将防火墙的多个接口组成一个逻辑组，组内接口始终保持相同的状态(UP/DOWN)。 <ul><li>若组内任一接口出现故障，系统将组内所有接口的状态置为DOWN</li><li>组内所有接口均恢复正常后，系统才会将组内接口的状态置为UP</li></ul></li><li>配置Link-Group功能，使防火墙直联的网络设备可以感知到主备发生切换，从而切换路由，恢复业务</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0/0/2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> link-group</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0/0/3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> link-group</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link-group</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span></code></pre></div><h2 id="双机热备版本升级及故障排查" tabindex="-1">双机热备版本升级及故障排查 <a class="header-anchor" href="#双机热备版本升级及故障排查" aria-label="Permalink to &quot;双机热备版本升级及故障排查&quot;">​</a></h2><ul><li>双机热备系统版本升级是现网中常见的运维操作之一，系统升级主要有以下原因 <ul><li>当前现网软件版本出现Bug，需要升级版本修复Bug</li><li>当前现网软件版本不支持某些特性，需要新增设备特性</li><li>设备现网软件版本不统一，需要进行全网版本规范整改</li></ul></li></ul><h3 id="升级前准备" tabindex="-1">升级前准备 <a class="header-anchor" href="#升级前准备" aria-label="Permalink to &quot;升级前准备&quot;">​</a></h3><ul><li><p>确定升级方式：Web升级或者命令行方式升级</p></li><li><p>准备升级环境：配置防火墙作为Web server或FTP server</p></li><li><p>准备升级工具：登录工具及配置文件比较工具</p></li><li><p>获取升级所需的文件：如系统软件，以.bin为后缀名；内容安全组件包；特征库本地升级包等</p></li><li><p>查看设备当前运行情况</p><ul><li>查询当前版本软件的信息 -- display version</li><li>确认当前License的使用情况 -- display license</li><li>查看设备当前硬件运行状态 -- display device</li><li>查询设备当前配置文件 -- display startup</li><li>查看设备接口信息 -- display interface brief</li><li>查看设备双机状态 -- display hrp state -- display vrrp</li><li>查询业务运行情况 -- display ip routing-table -- display mac-address</li><li>查看设备会话表 -- display firewall session table</li></ul></li><li><p>查看和备份重要数据</p><ul><li>备份系统软件</li><li>保存配置并备份配置文件 -- ftp&gt; get remote-filename [ local-filename ]</li></ul></li><li><p>检查剩余空间 -- dir hda1</p></li><li><p>上传待升级版本软件，并设置为下次启动时使用的软件版本</p><ul><li>ftp&gt; put local-filename [ remote-filename ]</li><li>startup system-software filename</li></ul></li></ul><h3 id="版本升级" tabindex="-1">版本升级 <a class="header-anchor" href="#版本升级" aria-label="Permalink to &quot;版本升级&quot;">​</a></h3><p>为保障升级过程中业务的连续性，系统升级通常选择在业务运行较少的时段，如非工作时间段；此外，升级需要遵循的主要原则是Active设备和Standby设备分别升级，先升级Standby设备，然后再升级Active设备，在升级过程中HRP备份通道（心跳线）必须断开。</p><ul><li>Shutdown备机的业务接口；</li><li>Shutdown备机的心跳接口；</li><li>升级备机的系统软件版本；</li><li>Undo shutdown备机的心跳接口；</li><li>等待主备防火墙同步会话表等表项；</li><li>Undo shutdown备机的业务接口；</li><li>验证备机的升级结果：版本信息、License信息、设备运行状态、接口信息、配置对比、路由表、会话表等；</li><li>保存配置</li></ul><h3 id="升级后验证" tabindex="-1">升级后验证 <a class="header-anchor" href="#升级后验证" aria-label="Permalink to &quot;升级后验证&quot;">​</a></h3><ul><li>使用display hrp state命令可以查看防火墙的业务主备状态。</li><li>使用Ping命令测试业务是否正常。</li><li>测试双机倒换：</li><li>在内网的PC上长Ping公网的IP地址，然后将主用防火墙的上行或下行接口shutdown，观察防火墙状态切换及Ping包丢包情况。如果切换正常，备用防火墙会立即切换为主机承载业务。备用防火墙命令行提示符前的前缀由HRP_S变为HRP_M，主用防火墙命令行提示符前的前缀由HRP_M变为HRP_S。Ping测试观察是否存在丢包情况；</li><li>再将主用防火墙的上行或下行接口恢复，观察防火墙状态切换及Ping包丢包情况。如果切换正常，在抢占延迟时间到达（缺省是60s）后，主用防火墙会重新切换为主机承载业务。主用防火墙命令行提示符前的前缀由HRP_S变为HRP_M，备用防火墙命令行提示符前的前缀由HRP_M变为HRP_S。Ping测试观察存在丢包情况</li></ul><h3 id="故障排查" tabindex="-1">故障排查 <a class="header-anchor" href="#故障排查" aria-label="Permalink to &quot;故障排查&quot;">​</a></h3><p><strong>HRP协议状态异常</strong></p><ul><li><p>故障现象：防火墙主备备份组网场景中，在防火墙A查看HRP运行状态，对端状态显示为“unknown”</p></li><li><p>故障原因分析：</p><ul><li>对端设备没有开启双机热备功能。</li><li>当前没有可用的备份通道</li></ul></li><li><p>解决措施：</p><ul><li>启用对端防火墙的双机热备功能。</li><li>使用命令display hrp interface检查备份通道并修复</li></ul></li></ul><p><strong>NAT场景中流量转发路径异常</strong></p><ul><li><p>组网描述：防火墙负载分担组网场景中，<strong>上下行链路均采用VRRP协议</strong></p></li><li><p>故障现象：路由器发送的返程报文时而到达防火墙A，时而达到防火墙B，影响业务的正常运行</p></li><li><p>故障原因分析：</p><ul><li>以VRRP备份组1为例，内网用户访问Internet的流量到达防火墙A后，源IP地址被NAT策略修改为公网地址；</li><li>防火墙A会将NAT策略和NAT映射信息同步至防火墙B；</li><li>路由器发送返程报文时，会发送ARP请求公网的MAC地址，防火墙A、B均会响应，导致返程流量路径异常</li></ul></li><li><p>解决措施：</p><ul><li>需要在防火墙上将NAT地址池与VRRP备份组进行绑定</li><li>绑定后，仅有主用防火墙A会响应ARP请求，且响应的MAC地址为上行VRRP对应的虚拟MAC地址，所有返程流量只会转发至防火墙A</li></ul></li></ul><p><strong>防火墙主备切换频繁</strong></p><ul><li><p>故障现象：防火墙主备备份组网场景中，防火墙双机热备的状态反复切换，导致流量异常。</p></li><li><p>故障原因分析：</p><ul><li>防火墙业务接口状态异常，频繁UP/DOWN，导致主备切换频繁；</li><li>主备防火墙的心跳报文发送间隔不一致。</li></ul></li><li><p>解决措施：</p><ul><li>检查业务接口配置是否错误；</li><li>若业务接口为光接口，检查光模块是否存在异常；</li><li>检查防火墙心跳报文的发送间隔，并配置一致</li></ul></li></ul><h2 id="服务器负载均衡" tabindex="-1">服务器负载均衡 <a class="header-anchor" href="#服务器负载均衡" aria-label="Permalink to &quot;服务器负载均衡&quot;">​</a></h2><p>服务器负载均衡（SBL，server load balancing）,日益增长的网络业务量对服务器造成了巨大压力，当单个服务器无法满足网络需求时，企业一般会采取更换高性能设备或增加服务器数量的方法来解决性能不足的问题。</p><p>服务器负载均衡就是 <strong>将本应由一个服务器处理的业务分发给多个服务器来处理</strong>，以此提高处理业务的效率和能力。处理业务的服务器组成服务器集群，对外体现为一台逻辑上的服务器，由FW决定如何分配流量给各个服务器。</p><p>负载均衡算法是服务器负载均衡功能的核心，通过负载均衡算法即可得到由哪台实服务器来处理业务流量。</p><ul><li>简单轮询算法 -- 依次轮询连接</li><li>最小连接算法 -- 哪个连接最少连哪个</li><li>会话保持算法(源IP hash算法) -- 单位时间内同设备连接的都是同一台真实服务器</li></ul><blockquote><p>三种算法都可以加权</p></blockquote><p><strong>服务健康检查</strong>：</p><p>FW通过向服务器定期发送探测报文来及时了解服务器的状态，根据服务类型的不同，使用不同协议类型的探测报文。FW支持的探测报文协议类型包括TCP、ICMP、HTTP、DNS和RADIUS。</p><p><strong>注意事项：</strong></p><ul><li>服务器负载均衡功能 <strong>仅支持IPv4协议</strong></li><li>服务器负载均衡功能支持的多通道协议 <strong>仅为FTP协议</strong></li><li>配置服务器负载均衡功能后，在 <strong>配置策略（如安全策略）时，需针对虚拟服务器的IP地址进行配置。在配置路由时，需针对实服务器的IP地址进行配置</strong></li></ul><blockquote><p>配置负载均衡，FW会自动进行nat处理</p></blockquote><p><img src="/assets/9g2GEqCzSbYKy78.BqWx4ZuA.png" alt="image-20231028165235367" loading="lazy"></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slb</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#配置会话保持</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">slb</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> persistence</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FTP</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> source-ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aging-time</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 180</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   #根据源ip会话保持180s</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #配置负载均衡算法</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> group</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FTP-SERVER</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  metric</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> weight-least-connection</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #配置真实服务器地址和权重</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  rserver</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  rip</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.1.1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 21</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> weight</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  rserver</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  rip</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.1.2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 21</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> weight</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  rserver</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  rip</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.1.3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 21</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> weight</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #配置健康检查功能，流量不受安全策略控制</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  health-check</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> icmp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tx-interval</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> times</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #配置虚拟服务器类型和端口</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> vserver</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FTP-VSERVER</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  vip</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.1.1.10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tcp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  vport</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2121</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #绑定会话保持</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  persistence</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FTP</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #关联虚拟服务器和真实服务器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  group</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> FTP-SERVER</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#启用ftp协议的ASPF功能</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">firewall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> detect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ftp</span></span></code></pre></div><h2 id="单usg双isp配置" tabindex="-1">单USG双ISP配置 <a class="header-anchor" href="#单usg双isp配置" aria-label="Permalink to &quot;单USG双ISP配置&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#策略路由，优于普通路由</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">policy-based-route</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Internet1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ingress-interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet1/0/0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  source-address</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 172.16.1.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mask</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 255.255.255.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  action</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pbr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> next-hop</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.1.1.1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     #执行策略路由动作</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Internet2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ingress-interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet1/0/3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  source-address</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10.1.1.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mask</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 255.255.255.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  action</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pbr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> next-hop</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2.2.2.2</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#nat匹配条件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Internet</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  source-zone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trust</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  destination-zone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> untrust</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  source-address</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10.1.1.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mask</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 255.255.255.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  source-address</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 172.16.1.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mask</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 255.255.255.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  action</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> source-nat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> easy-ip</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#安全策略</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">security-policy</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Internet</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  source-zone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trust</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  destination-zone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> untrust</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  source-address</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10.1.1.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mask</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 255.255.255.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  source-address</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 172.16.1.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mask</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 255.255.255.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  action</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> permit</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#策略路由绑定ip-link</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ip-link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> check</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ip-link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Internet1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> destination</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.1.1.1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet1/0/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> icmp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ip-link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Internet2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> destination</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2.2.2.2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet1/0/2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> icmp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">policy-based-route</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Internet1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  track</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ip-link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Internet1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   #当ip-link down的时候，策略路由失效</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rule</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> name</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Internet2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  track</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ip-link</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Internet2</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-2295edbf data-v-fbb4769a><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-fbb4769a><span class="visually-hidden" id="doc-footer-aria-label" data-v-fbb4769a>Pager</span><div class="pager" data-v-fbb4769a><a class="VPLink link pager-link prev" href="/security%20devices/3.html" data-v-fbb4769a><!--[--><span class="desc" data-v-fbb4769a>Previous page</span><span class="title" data-v-fbb4769a>防火墙NAT</span><!--]--></a></div><div class="pager" data-v-fbb4769a><a class="VPLink link pager-link next" href="/security%20devices/5.html" data-v-fbb4769a><!--[--><span class="desc" data-v-fbb4769a>Next page</span><span class="title" data-v-fbb4769a>防火墙用户管理技术</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-2fdd469f data-v-991ed27d><div class="container" data-v-991ed27d><!----><p class="copyright" data-v-991ed27d>Copyright © 2024-present <a href="mailto:xuzn@msn.com">xuzn@msn.com</a></p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"ajax_4.md\":\"CnI-hXyq\",\"ajax_2.md\":\"B5aHVomh\",\"browser_2.md\":\"O3n8AWyk\",\"html_5.md\":\"BjFnemWh\",\"javascript_12.md\":\"B04cKqE-\",\"browser_3.md\":\"CAvZOYk9\",\"javascript_16.md\":\"BV_TghHR\",\"en_index.md\":\"CqF6MrFb\",\"browser_1.md\":\"UohTcmaa\",\"css_10.md\":\"D68w-0cj\",\"html_10.md\":\"BD7XuaJg\",\"javascript_23.md\":\"kKYufPJd\",\"css_1.md\":\"kk4ehwgg\",\"javascript_19.md\":\"BVq-Pzfd\",\"javascript_25.md\":\"uhRIxA2d\",\"network security_1.md\":\"CBMAWmUT\",\"html_8.md\":\"CFjlzN5q\",\"html_2.md\":\"DLWsFhi1\",\"git_4.md\":\"Dgkwp4qk\",\"ajax_3.md\":\"BVB_7yCr\",\"network security_8.md\":\"BwNFi1lP\",\"javascript_21.md\":\"J888DKwj\",\"javascript_13.md\":\"VD3nNV4d\",\"javascript_27.md\":\"MolSrIu2\",\"vue3_4.md\":\"B_MOM3ms\",\"css_7.md\":\"CzTkAG62\",\"javascript_15.md\":\"DfL5MutI\",\"ajax_1.md\":\"DMEHmWrZ\",\"javascript_18.md\":\"CI_LridG\",\"javascript_1.md\":\"CUHG5f0X\",\"javascript_30.md\":\"BfrGNFyJ\",\"security devices_1.md\":\"DTL81A7N\",\"kali_1.md\":\"DIIdRcML\",\"javascript_8.md\":\"CRHL2m9D\",\"html_3.md\":\"BW9ZYc19\",\"css_8.md\":\"CYfNNwok\",\"css_5.md\":\"BMBqAxiQ\",\"markdown-examples.md\":\"xS3QsCqk\",\"git_2.md\":\"BNxRtHhL\",\"python_10.md\":\"CjOj-dQ3\",\"security devices_8.md\":\"gDCdBHwk\",\"git_1.md\":\"kiVxQaQc\",\"python_1.md\":\"DazJJh9Z\",\"linux_9.md\":\"B5hnvWq8\",\"network security_12.md\":\"BnuR9i5I\",\"less and scss_2.md\":\"2YIhgHSy\",\"html_7.md\":\"BquEYTW6\",\"html_6.md\":\"mzqBEiet\",\"css_6.md\":\"Dj2NJtQJ\",\"javascript_11.md\":\"Bj15Xs8O\",\"less and scss_1.md\":\"CxLlqX08\",\"html_9.md\":\"Qtc4rwAS\",\"typescript_8.md\":\"owjztxlz\",\"javascript_17.md\":\"CXjGc8st\",\"css_9.md\":\"DGzby0Ry\",\"nodejs_10.md\":\"BiZNlyC1\",\"javascript_9.md\":\"DvtC7GbI\",\"security devices_7.md\":\"BeMHMjgz\",\"security devices_2.md\":\"dJDeeUjI\",\"javascript_2.md\":\"DKWSR38O\",\"nodejs_11.md\":\"C5AL6QBm\",\"linux_4.md\":\"BtsTU7iC\",\"linux_7.md\":\"B_romsTW\",\"python_11.md\":\"6LRqJmWv\",\"css_3.md\":\"BK1d7wCs\",\"javascript_26.md\":\"CJs1wtMM\",\"typescript_6.md\":\"BMuzEGpB\",\"css_4.md\":\"B8P16ndm\",\"network security_5.md\":\"C9MBoQqS\",\"kali_2.md\":\"BBa2tdsn\",\"network security_9.md\":\"vBAxg3L1\",\"git_3.md\":\"BCyXunGW\",\"linux_10.md\":\"Chu6r5EM\",\"typescript_4.md\":\"rMK8bcbJ\",\"javascript_5.md\":\"BcNEeyL0\",\"kali_5.md\":\"gKYM4k-A\",\"security devices_9.md\":\"eN5obYrg\",\"typescript_9.md\":\"DLdJ-gZT\",\"linux_1.md\":\"C793L66_\",\"javascript_22.md\":\"BiAMcJ-U\",\"security devices_3.md\":\"fYMhj3CP\",\"kali_3.md\":\"CkJ2SJ55\",\"html_1.md\":\"D5ZxMayW\",\"python_8.md\":\"CWAUmu9d\",\"typescript_10.md\":\"Cv0ezhMX\",\"index.md\":\"gUiJkRhN\",\"javascript_3.md\":\"DhCLKCIv\",\"javascript_32.md\":\"BQdXvtsK\",\"security devices_4.md\":\"BAXO_DuJ\",\"javascript_29.md\":\"BMOEy__t\",\"javascript_34.md\":\"rPeTLtUj\",\"network security_10.md\":\"IAwv8XvL\",\"api-examples.md\":\"09Grijv8\",\"network security_7.md\":\"CLSO0_yv\",\"javascript_33.md\":\"7aM3LbR-\",\"nodejs_5.md\":\"DnRTJSPL\",\"typescript_3.md\":\"7yZLR1gX\",\"security devices_6.md\":\"B2yWS3Xc\",\"kali_4.md\":\"CHbb2U88\",\"javascript_10.md\":\"CLyAVJsZ\",\"nodejs_7.md\":\"CPnfuOiz\",\"vue3_2.md\":\"CAb8JAT1\",\"linux_6.md\":\"HjzmY8qL\",\"javascript_6.md\":\"CEbnzZbz\",\"nodejs_6.md\":\"CbexqIeJ\",\"javascript_4.md\":\"CZ51kLkD\",\"network security_6.md\":\"dqq2NkaQ\",\"javascript_7.md\":\"CXr91vVy\",\"security devices_5.md\":\"CZ8d1NST\",\"nodejs_1.md\":\"CJJ5SCO7\",\"vue3_6.md\":\"_CT91LjT\",\"network security_11.md\":\"DE0Aq-yS\",\"python_7.md\":\"RmRfRO64\",\"python_3.md\":\"N0YJ0Ki4\",\"javascript_24.md\":\"D8q-qQsX\",\"python_2.md\":\"BZDifyyZ\",\"network security_4.md\":\"BOc-hIQr\",\"linux_5.md\":\"BFLrWW7O\",\"javascript_28.md\":\"D_vV-d1H\",\"javascript_31.md\":\"BC7VOY6R\",\"linux_2.md\":\"DkVWgeAV\",\"css_2.md\":\"4INzyWAS\",\"javascript_14.md\":\"4YerQ04A\",\"vue3_7.md\":\"DHQz61rT\",\"python_6.md\":\"CNosXNf5\",\"python_9.md\":\"ByQXBSIx\",\"en.md\":\"BeVNFkzr\",\"typescript_1.md\":\"CrkGpsMg\",\"network security_3.md\":\"BDmJq9HK\",\"nodejs_9.md\":\"Bf_M6YOr\",\"vue3_8.md\":\"CmfhTJdA\",\"python_5.md\":\"CeI2035Z\",\"vue3_3.md\":\"BPljwkWu\",\"javascript_20.md\":\"CnI708tY\",\"vue3_1.md\":\"BFiqfg6t\",\"linux_3.md\":\"B7NzcTfP\",\"network security_2.md\":\"C0KQcFIQ\",\"linux_8.md\":\"CGF4Z_8U\",\"vue3_5.md\":\"Cr70K63Z\",\"typescript_5.md\":\"7s_PHXbK\",\"typescript_2.md\":\"B4g6eVNg\",\"nodejs_3.md\":\"B_oghSF9\",\"nodejs_4.md\":\"Dvc5vDE0\",\"nodejs_2.md\":\"DQJI3-xm\",\"html_4.md\":\"CgHeUZFs\",\"nodejs_8.md\":\"B0BnDGA1\",\"python_4.md\":\"D8Oy6f4X\",\"typescript_7.md\":\"nRpvJPCc\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"yage\",\"description\":\"yage Blog\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":\"dark\",\"themeConfig\":{\"logo\":\"/stars.png\",\"search\":{\"provider\":\"local\"},\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"前端\",\"items\":[{\"text\":\"HTML\",\"link\":\"/html/1\"},{\"text\":\"CSS\",\"link\":\"/css/1\"},{\"text\":\"JavaScript\",\"link\":\"/javascript/1\"},{\"text\":\"ajax\",\"link\":\"/ajax/1\"},{\"text\":\"less and scss\",\"link\":\"/less and scss/1\"},{\"text\":\"TypeScript\",\"link\":\"/typescript/1\"},{\"text\":\"Vue3\",\"link\":\"/vue3/1\"},{\"text\":\"浏览器工作原理\",\"link\":\"/browser/1\"}]},{\"text\":\"安全\",\"items\":[{\"text\":\"Kali\",\"link\":\"/kali/1\"},{\"text\":\"网络安全\",\"link\":\"/network security/1\"},{\"text\":\"安全设备\",\"link\":\"/security devices/1\"}]},{\"text\":\"Python\",\"link\":\"/python/1\"},{\"text\":\"Nodejs\",\"link\":\"/nodejs/1\"},{\"text\":\"Git\",\"link\":\"/git/1\"},{\"text\":\"Linux\",\"link\":\"/linux/1\"}],\"sidebar\":{\"/python/\":[{\"text\":\"目录\",\"items\":[{\"text\":\"Python环境搭建与输入输出\",\"link\":\"/python/1\"},{\"text\":\"Python运算符与if结构\",\"link\":\"/python/2\"},{\"text\":\"Python中的循环结构\",\"link\":\"/python/3\"},{\"text\":\"Python数据序列(一)\",\"link\":\"/python/4\"},{\"text\":\"Python数据序列(二)\",\"link\":\"/python/5\"},{\"text\":\"Python中的函数\",\"link\":\"/python/6\"},{\"text\":\"Python函数进阶\",\"link\":\"/python/7\"},{\"text\":\"Python文件操作\",\"link\":\"/python/8\"},{\"text\":\"Python面向对象\",\"link\":\"/python/9\"},{\"text\":\"Python的异常、模块以及包管理\",\"link\":\"/python/10\"},{\"text\":\"Python线程进程和协程\",\"link\":\"/python/11\"}]}],\"/nodejs/\":[{\"text\":\"目录\",\"items\":[{\"text\":\"一、Node.js基础\",\"link\":\"/nodejs/1\"},{\"text\":\"二、Express\",\"link\":\"/nodejs/2\"},{\"text\":\"三、MongoDB\",\"link\":\"/nodejs/3\"},{\"text\":\"四、接口规范与业务分层\",\"link\":\"/nodejs/4\"},{\"text\":\"五、登录鉴权\",\"link\":\"/nodejs/5\"},{\"text\":\"六、文件上传管理\",\"link\":\"/nodejs/6\"},{\"text\":\"七、APIDOC - API 文档生成工具\",\"link\":\"/nodejs/7\"},{\"text\":\"八、Koa2\",\"link\":\"/nodejs/8\"},{\"text\":\"九、MySQL\",\"link\":\"/nodejs/9\"},{\"text\":\"十、Socket编程\",\"link\":\"/nodejs/10\"},{\"text\":\"十一、mocha\",\"link\":\"/nodejs/11\"}]}],\"/html/\":[{\"text\":\"目录\",\"items\":[{\"text\":\"一、前序知识\",\"link\":\"/html/1\"},{\"text\":\"二、HTML 简介\",\"link\":\"/html/2\"},{\"text\":\"三、HTML 入门\",\"link\":\"/html/3\"},{\"text\":\"四、HTML 基础\",\"link\":\"/html/4\"},{\"text\":\"五、HTML5简介\",\"link\":\"/html/5\"},{\"text\":\"六、新增语义化标签\",\"link\":\"/html/6\"},{\"text\":\"七、新增表单功能\",\"link\":\"/html/7\"},{\"text\":\"八、新增多媒体标签\",\"link\":\"/html/8\"},{\"text\":\"九、新增全局属性（了解）\",\"link\":\"/html/9\"},{\"text\":\"十、HTML5兼容性处理\",\"link\":\"/html/10\"}]}],\"/css/\":[{\"text\":\"目录\",\"items\":[{\"text\":\"一、CSS基础\",\"link\":\"/css/1\"},{\"text\":\"二、CSS选择器\",\"link\":\"/css/2\"},{\"text\":\"三、CSS三大特性\",\"link\":\"/css/3\"},{\"text\":\"四、CSS常用属性\",\"link\":\"/css/4\"},{\"text\":\"五、CSS盒子模型\",\"link\":\"/css/5\"},{\"text\":\"六、浮动\",\"link\":\"/css/6\"},{\"text\":\"七、定位\",\"link\":\"/css/7\"},{\"text\":\"八、布局\",\"link\":\"/css/8\"},{\"text\":\"九、CSS3 简介\",\"link\":\"/css/9\"},{\"text\":\"十、CSS3 基本语法\",\"link\":\"/css/10\"}]}],\"/javascript/\":[{\"text\":\"目录\",\"items\":[{\"text\":\"-----【JavaScript 基础】-----\",\"link\":\"/javascript/1\"},{\"text\":\"介绍\",\"link\":\"/javascript/2\"},{\"text\":\"变量和常亮\",\"link\":\"/javascript/3\"},{\"text\":\"数据类型\",\"link\":\"/javascript/4\"},{\"text\":\"类型转换\",\"link\":\"/javascript/5\"},{\"text\":\"运算符\",\"link\":\"/javascript/6\"},{\"text\":\"语句\",\"link\":\"/javascript/7\"},{\"text\":\"for 语句\",\"link\":\"/javascript/8\"},{\"text\":\"数组\",\"link\":\"/javascript/9\"},{\"text\":\"函数\",\"link\":\"/javascript/10\"},{\"text\":\"-----【Web APIs】-----\",\"link\":\"/javascript/11\"},{\"text\":\"介绍\",\"link\":\"/javascript/12\"},{\"text\":\"DOM基本操作\",\"link\":\"/javascript/13\"},{\"text\":\"DOM注册事件\",\"link\":\"/javascript/14\"},{\"text\":\"事件进阶\",\"link\":\"/javascript/15\"},{\"text\":\"DOM进阶\",\"link\":\"/javascript/16\"},{\"text\":\"BOM操作\",\"link\":\"/javascript/17\"},{\"text\":\"正则表达式\",\"link\":\"/javascript/18\"},{\"text\":\"-----【JavaScript 进阶】-----\",\"link\":\"/javascript/19\"},{\"text\":\"作用域\",\"link\":\"/javascript/20\"},{\"text\":\"函数\",\"link\":\"/javascript/21\"},{\"text\":\"解构赋值\",\"link\":\"/javascript/22\"},{\"text\":\"综合案例\",\"link\":\"/javascript/23\"},{\"text\":\"深入对象\",\"link\":\"/javascript/24\"},{\"text\":\"内置构造函数\",\"link\":\"/javascript/25\"},{\"text\":\"属性描述符\",\"link\":\"/javascript/26\"},{\"text\":\"编程思想\",\"link\":\"/javascript/27\"},{\"text\":\"类\",\"link\":\"/javascript/28\"},{\"text\":\"原型对象\",\"link\":\"/javascript/29\"},{\"text\":\"面向对象综合案例\",\"link\":\"/javascript/30\"},{\"text\":\"深浅拷贝\",\"link\":\"/javascript/31\"},{\"text\":\"异常处理\",\"link\":\"/javascript/32\"},{\"text\":\"处理this\",\"link\":\"/javascript/33\"},{\"text\":\"防抖节流\",\"link\":\"/javascript/34\"}]}],\"/git/\":[{\"text\":\"目录\",\"items\":[{\"text\":\"1、预前配置\",\"link\":\"/git/1\"},{\"text\":\"2、基本命令\",\"link\":\"/git/2\"},{\"text\":\"3、Git远程仓库\",\"link\":\"/git/3\"},{\"text\":\"4、快速推送\",\"link\":\"/git/4\"}]}],\"/linux/\":[{\"text\":\"目录\",\"items\":[{\"text\":\"远程连接\",\"link\":\"/linux/1\"},{\"text\":\"vim编辑器\",\"link\":\"/linux/2\"},{\"text\":\"重定向/环境变量\",\"link\":\"/linux/3\"},{\"text\":\"Linux命令\",\"link\":\"/linux/4\"},{\"text\":\"用户和权限\",\"link\":\"/linux/5\"},{\"text\":\"存储和硬盘\",\"link\":\"/linux/6\"},{\"text\":\"RAID和LVM\",\"link\":\"/linux/7\"},{\"text\":\"Shell编程\",\"link\":\"/linux/8\"},{\"text\":\"进阶玩法\",\"link\":\"/linux/9\"},{\"text\":\"问题篇\",\"link\":\"/linux/10\"}]}],\"/ajax/\":[{\"text\":\"目录\",\"items\":[{\"text\":\"01 【AJAX】\",\"link\":\"/ajax/1\"},{\"text\":\"02【Axios】\",\"link\":\"/ajax/2\"},{\"text\":\"03 【Fetch】\",\"link\":\"/ajax/3\"},{\"text\":\"04 【跨域初识】\",\"link\":\"/ajax/4\"}]}],\"/less and scss/\":[{\"text\":\"目录\",\"items\":[{\"text\":\"LESS\",\"link\":\"/less and scss/1\"},{\"text\":\"SASS\",\"link\":\"/less and scss/2\"}]}],\"/browser/\":[{\"text\":\"目录\",\"items\":[{\"text\":\"事件循环\",\"link\":\"/browser/1\"},{\"text\":\"渲染原理\",\"link\":\"/browser/2\"},{\"text\":\"CSS 属性计算过程\",\"link\":\"/browser/3\"}]}],\"/vue3/\":[{\"text\":\"目录\",\"items\":[{\"text\":\"1. Vue3简介\",\"link\":\"/vue3/1\"},{\"text\":\"2. 创建Vue3工程\",\"link\":\"/vue3/2\"},{\"text\":\"3. Vue3核心语法\",\"link\":\"/vue3/3\"},{\"text\":\"4. 路由\",\"link\":\"/vue3/4\"},{\"text\":\"5. pinia \",\"link\":\"/vue3/5\"},{\"text\":\"6. 组件通信\",\"link\":\"/vue3/6\"},{\"text\":\"7. 其它 API\",\"link\":\"/vue3/7\"},{\"text\":\"8. Vue3新组件\",\"link\":\"/vue3/8\"}]}],\"/typescript/\":[{\"text\":\"目录\",\"items\":[{\"text\":\"环境配置\",\"link\":\"/typescript/1\"},{\"text\":\"基础类型\",\"link\":\"/typescript/2\"},{\"text\":\"配置与调试\",\"link\":\"/typescript/3\"},{\"text\":\"断言使用\",\"link\":\"/typescript/4\"},{\"text\":\"类与接口\",\"link\":\"/typescript/5\"},{\"text\":\"泛型 Generics\",\"link\":\"/typescript/6\"},{\"text\":\"装饰器\",\"link\":\"/typescript/7\"},{\"text\":\"模块管理\",\"link\":\"/typescript/8\"},{\"text\":\"webpack\",\"link\":\"/typescript/9\"},{\"text\":\"类型工具\",\"link\":\"/typescript/10\"}]}],\"/network security/\":[{\"text\":\"目录\",\"items\":[{\"text\":\"一、dos基本命令\",\"link\":\"/network security/1\"},{\"text\":\"二、用户与组管理\",\"link\":\"/network security/2\"},{\"text\":\"三、服务器的远程管理\",\"link\":\"/network security/3\"},{\"text\":\"四、破解windows系统密码\",\"link\":\"/network security/4\"},{\"text\":\"五、NTFS安全权限\",\"link\":\"/network security/5\"},{\"text\":\"六、文件共享服务器\",\"link\":\"/network security/6\"},{\"text\":\"七、DHCP部署与安全\",\"link\":\"/network security/7\"},{\"text\":\"八、DNS部署与安全\",\"link\":\"/network security/8\"},{\"text\":\"九、WEB服务器和FTP服务器\",\"link\":\"/network security/9\"},{\"text\":\"十、域\",\"link\":\"/network security/10\"},{\"text\":\"十一、PKI\",\"link\":\"/network security/11\"},{\"text\":\"十二、扫描与爆破\",\"link\":\"/network security/12\"}]}],\"/kali/\":[{\"text\":\"目录\",\"items\":[{\"text\":\"一、被动信息收集\",\"link\":\"/kali/1\"},{\"text\":\"二、主动信息收集\",\"link\":\"/kali/2\"},{\"text\":\"三、WireShark抓包及常用协议分析\",\"link\":\"/kali/3\"},{\"text\":\"四、NMAP高级使用技巧和漏洞扫描发现\",\"link\":\"/kali/4\"},{\"text\":\"五、漏洞利用\",\"link\":\"/kali/5\"}]}],\"/security devices/\":[{\"text\":\"目录\",\"items\":[{\"text\":\"网络安全基础\",\"link\":\"/security devices/1\"},{\"text\":\"防火墙基础原理\",\"link\":\"/security devices/2\"},{\"text\":\"防火墙NAT\",\"link\":\"/security devices/3\"},{\"text\":\"防火墙高可靠性技术\",\"link\":\"/security devices/4\"},{\"text\":\"防火墙用户管理技术\",\"link\":\"/security devices/5\"},{\"text\":\"加解密及PKI\",\"link\":\"/security devices/6\"},{\"text\":\"VPN\",\"link\":\"/security devices/7\"},{\"text\":\"防火墙流量管理\",\"link\":\"/security devices/8\"},{\"text\":\"防火墙虚拟系统\",\"link\":\"/security devices/9\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/yage-zhu\"}],\"footer\":{\"copyright\":\"Copyright © 2024-present <a href=\\\"mailto:xuzn@msn.com\\\">xuzn@msn.com</a>\"}},\"locales\":{\"root\":{\"label\":\"中文\",\"lang\":\"zh\"},\"en\":{\"label\":\"English\",\"lang\":\"en\",\"link\":\"/en\",\"themeConfig\":{\"nav\":[{\"text\":\"Home\",\"link\":\"/\"},{\"text\":\"web developer\",\"items\":[{\"text\":\"HTML\",\"link\":\"/html/1\"},{\"text\":\"CSS\",\"link\":\"/css/1\"},{\"text\":\"JavaScript\",\"link\":\"/javascript/1\"},{\"text\":\"ajax\",\"link\":\"/ajax/1\"},{\"text\":\"less and scss\",\"link\":\"/less and scss/1\"},{\"text\":\"TypeScript\",\"link\":\"/typescript/1\"},{\"text\":\"Vue3\",\"link\":\"/vue3/1\"},{\"text\":\"How the browser works\",\"link\":\"/browser/1\"}]},{\"text\":\"Security\",\"items\":[{\"text\":\"Kali\",\"link\":\"/kali/1\"},{\"text\":\"Network Security\",\"link\":\"/network security/1\"},{\"text\":\"Security Devices\",\"link\":\"/security devices/1\"}]},{\"text\":\"Python\",\"link\":\"/python/1\"},{\"text\":\"Nodejs\",\"link\":\"/nodejs/1\"},{\"text\":\"Git\",\"link\":\"/git/1\"},{\"text\":\"Linux\",\"link\":\"/linux/1\"}]}}},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>