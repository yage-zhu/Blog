import{_ as e,c as a,o as p,a3 as t}from"./chunks/framework.7ep0oyv4.js";const D=JSON.parse('{"title":"七、DHCP部署与安全","description":"","frontmatter":{},"headers":[],"relativePath":"network security/7.md","filePath":"network security/7.md"}'),r={name:"network security/7.md"},o=t('<h1 id="七、dhcp部署与安全" tabindex="-1">七、DHCP部署与安全 <a class="header-anchor" href="#七、dhcp部署与安全" aria-label="Permalink to &quot;七、DHCP部署与安全&quot;">​</a></h1><h2 id="_7-1-dhcp概述" tabindex="-1">7.1 DHCP概述 <a class="header-anchor" href="#_7-1-dhcp概述" aria-label="Permalink to &quot;7.1 DHCP概述&quot;">​</a></h2><ul><li><p>(Dynamic Host Configure Protocol)自动分配IP地址</p></li><li><p>地址池/作用域：(IP、子网掩码、网关、DNS、租期)，</p></li><li><p>DHCP协议端口是 UDP 67/68</p></li><li><p>DHCP优点：减少工作量、避免IP冲突、提高地址利用率</p></li></ul><h2 id="_7-2-dhcp原理" tabindex="-1">7.2 DHCP原理 <a class="header-anchor" href="#_7-2-dhcp原理" aria-label="Permalink to &quot;7.2 DHCP原理&quot;">​</a></h2><p>也成为DHCP租约过程，分为4个步骤：</p><p><strong>1）客户机发送DHCP Discovery广播包</strong></p><p>客户机广播请求IP地址(包含客户机的MAC地址)</p><p><strong>2）服务器响应DHCP Offer广播包</strong></p><p>服务器响应提供的IP地址(但无子网掩码、网关等参数)</p><p><strong>3）客户机发送DHCP Request广播包</strong></p><p>客户机选择先响应的服务器</p><p><strong>4）服务器发送DHCP ACK广播包</strong></p><p>服务器确定了租约，并提供网卡详细参数IP、掩码、网关、DNS、租期等</p><h2 id="_7-3-dhcp续约" tabindex="-1">7.3 DHCP续约 <a class="header-anchor" href="#_7-3-dhcp续约" aria-label="Permalink to &quot;7.3 DHCP续约&quot;">​</a></h2><p>当50%过后，客户机会再次发送DHCP Request包，进行续约，如服务器无响应，则继续使用。</p><p>并在87.5%再次 DHCP Request包，进行续约，如仍然无响应，并释放IP地址，及重新发送DHCP Discovery广播包来获取IP地址。</p><p>当无任何服务器响应时，自动给自己分配一个169.254.×.x/16,属于全球统一无效地址，用于临时内网通信！</p><h2 id="_7-4-部署dhcp服务器" tabindex="-1">7.4 部署DHCP服务器 <a class="header-anchor" href="#_7-4-部署dhcp服务器" aria-label="Permalink to &quot;7.4 部署DHCP服务器&quot;">​</a></h2><p>1）IP地址固定(服务器必须固定IP地址)</p><p>2）安装DHCP服务插件</p><p>3）新建作用域及作用域选项</p><p>4）激活</p><p>5）客户机验证：</p><p>ipconfig /release       # 释放ip（取消租约）<br> ipconfig /renew         # 重新获取IP（有IP时，发送request续约，无IP时发送Discovery重新获取IP）</p><h2 id="_7-5-地址保留" tabindex="-1">7.5 地址保留 <a class="header-anchor" href="#_7-5-地址保留" aria-label="Permalink to &quot;7.5 地址保留&quot;">​</a></h2><p>对指定的MAC地址，固定动态分配IP地址</p><h2 id="_7-6-dhcp攻击与防御" tabindex="-1">7.6 DHCP攻击与防御 <a class="header-anchor" href="#_7-6-dhcp攻击与防御" aria-label="Permalink to &quot;7.6 DHCP攻击与防御&quot;">​</a></h2><p>**1）攻击DHCP服务器：**频繁的发送伪装DHCP请求，直到将DHCP地址池资源耗尽</p><p>防御：在交换机（管理型）的端口上做动态MAC地址绑定</p><p>**2）伪装DHCP服务器攻击：**hack通过将自己部署为DHCP服务器，为客户机提供非法ip地址</p><p>防御：在交换机上（管理型），除合法的DHCP服务器所在接口外，全部设置为禁止发送dhcp offer包</p>',31),i=[o];function P(c,h,n,s,l,d){return p(),a("div",null,i)}const C=e(r,[["render",P]]);export{D as __pageData,C as default};
